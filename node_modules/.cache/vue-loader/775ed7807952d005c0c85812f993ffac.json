{"remainingRequest":"C:\\Users\\Lovepreet\\Desktop\\Project\\vuejs-ecommerce\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Lovepreet\\Desktop\\Project\\vuejs-ecommerce\\src\\views\\pages\\Cart.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Lovepreet\\Desktop\\Project\\vuejs-ecommerce\\src\\views\\pages\\Cart.vue","mtime":1647407531641},{"path":"C:\\Users\\Lovepreet\\Desktop\\Project\\vuejs-ecommerce\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1647363366624},{"path":"C:\\Users\\Lovepreet\\Desktop\\Project\\vuejs-ecommerce\\node_modules\\babel-loader\\lib\\index.js","mtime":1647363374298},{"path":"C:\\Users\\Lovepreet\\Desktop\\Project\\vuejs-ecommerce\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1647363366624},{"path":"C:\\Users\\Lovepreet\\Desktop\\Project\\vuejs-ecommerce\\node_modules\\vue-loader\\lib\\index.js","mtime":1647363375813}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiAoKSA9PiAoewogICAgcHJvZHVjdHM6IFtdCiAgfSksCiAgY29tcHV0ZWQ6IHsKICAgIGNhcnQoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5zZXNzaW9uLmNhcnQ7CiAgICB9LAogICAgLy8gcHJvZHVjdHMoKSB7CiAgICAvLyAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5wcm9kdWN0czsKICAgIC8vIH0sCiAgICBwdXJjaGFzZXMoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5wdXJjaGFzZXMuZmlsdGVyKChpdGVtcykgPT4gaXRlbXMudXNlcklkID09IHRoaXMuJHN0b3JlLnN0YXRlLnNlc3Npb24udXNlcklkKTsKICAgIH0sCiAgICB1c2VySWQoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5zZXNzaW9uLnVzZXJJZDsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdldEFsbFByb2R1Y3RzKCkgewogICAgICB0aGlzLmF4aW9zCiAgICAgICAgLmdldCgiaHR0cDovL2xvY2FsaG9zdDo1MDAwL2FwaS9Qcm9kdWN0IikKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsKICAgICAgICAgIHRoaXMucHJvZHVjdHMgPSByZXNwb25zZS5kYXRhOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgIH0pOwogICAgfSwKICAgIGdldFByb2R1Y3QoaWQpIHsKICAgICAgcmV0dXJuIHRoaXMucHJvZHVjdHMuZmlsdGVyKChwcm9kdWN0KSA9PiBwcm9kdWN0LmlkID09IGlkKVswXTsKICAgIH0sCiAgICBnZXREaXNjb3VudGVkVmFsdWUocHJpY2UsIGRpc2NvdW50KXsKICAgICAgcmV0dXJuIHByaWNlIC0gKCBwcmljZS8xMDAgKiBkaXNjb3VudCk7CiAgICB9LAogICAgZ2V0U3ViVG90YWwoKXsKICAgICAgdmFyIHN1bSA9IDA7CiAgICAgIHRoaXMuY2FydC5mb3JFYWNoKGVsZW1lbnQgPT4gewogICAgICAgIHZhciBwcm9kdWN0ID0gdGhpcy5nZXRQcm9kdWN0KGVsZW1lbnQucHJvZHVjdElkKTsKICAgICAgICB2YXIgcHJpY2UgPSB0aGlzLmdldERpc2NvdW50ZWRWYWx1ZShwcm9kdWN0LnByaWNlLCBwcm9kdWN0LmRpc2NvdW50KTsKICAgICAgICBzdW0gKz0gcHJpY2UgKiBlbGVtZW50LnF1YW50aXR5OwogICAgICB9KTsKICAgICAgcmV0dXJuIHN1bQogICAgfSwKICAgIGNhbGN1bGF0ZVRheCgpewogICAgICByZXR1cm4gdGhpcy5nZXRTdWJUb3RhbCgpLzEwMCAqIDEzOwogICAgfSwKICAgIGNhbGN1bGF0ZVRvdGFsKCl7CiAgICAgIHJldHVybiB0aGlzLmdldFN1YlRvdGFsKCkgKyB0aGlzLmNhbGN1bGF0ZVRheCgpICsgKHRoaXMuY2FydC5sZW5ndGggPiAwPyAxMDogMCk7CiAgICB9LAogICAgcHJvY2VlZFRvQnV5KCl7CiAgICAgIC8vIHRoaXMuY2FydC5mb3JFYWNoKChjYXJ0KSA9PiB7CiAgICAgIC8vICAgY2FydFsncHJvZHVjdCddID0gdGhpcy5nZXRQcm9kdWN0KGNhcnQucHJvZHVjdElkKQogICAgICAvLyB9KTsKCiAgICAgICB0aGlzLmF4aW9zCiAgICAgICAgLnBvc3QoImh0dHA6Ly9sb2NhbGhvc3QvZWNvbW1lcmNlLXNlcnZpY2UvYXBpL29yZGVyLnBocD9hY3Rpb249Y3JlYXRlT3JkZXIiLCB7CiAgICAgICAgICB1c2VySWQ6IHRoaXMuJHN0b3JlLnN0YXRlLnNlc3Npb24udXNlcklkLAogICAgICAgICAgc3ViVG90YWw6IHRoaXMuZ2V0U3ViVG90YWwoKSwKICAgICAgICAgIHRheEFtb3VudDogdGhpcy5jYWxjdWxhdGVUYXgoKSwKICAgICAgICAgIHByb2R1Y3RzOiB0aGlzLmNhcnQKICAgICAgICB9KQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdjbGVhckNhcnQnKTsKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvY29uZmlybWF0aW9uJyk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgfSk7CiAgICAgIC8vdGhpcy4kc3RvcmUuY29tbWl0KCdhZGRQdXJjaGFzZUl0ZW0nLCBwdXJjaGFzZUl0ZW0pOwoKICAgIH0sCiAgICBjbGVhckNhcnQoKXsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdjbGVhckNhcnQnKTsKICAgIH0sCiAgICByZW1vdmVGcm9tQ2FydChwcm9kdWN0SWQsIGluZGV4KSB7CiAgICAgIGlmKHRoaXMuY2FydCl7CiAgICAgICAgdGhpcy5jYXJ0LnNwbGljZShpbmRleCwgMSk7CiAgICAgIH0KICAgICAgLy8gdGhpcy4kc3RvcmUuY29tbWl0KCdyZW1vdmVGcm9tQ2FydCcsIGlkKTsKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldEFsbFByb2R1Y3RzKCkKICB9Cn0K"},{"version":3,"sources":["Cart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Cart.vue","sourceRoot":"src/views/pages","sourcesContent":["<template>\n  <div>\n    <v-container>\n      <p class=\"display-3 font-weight-light text-center pa-4\">Checkout Cart</p>\n      <v-row>\n        <v-col :cols=\"12\" md=\"9\" sm=\"12\">\n          <v-simple-table  v-if=\"cart.length > 0 && products.length > 0\">\n            <template v-slot:default>\n              <thead>\n                <tr>\n                  <th class=\"text-center\">ITEM</th>\n                  <th class=\"text-center\">PRICE</th>\n                  <th class=\"text-center\">QUANTITY</th>\n                  <th class=\"text-center\">TOTAL</th>\n                  <th class=\"text-center\"></th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr :key=\"item.productId\" v-for=\"(item, index) in cart\">\n                  <td>\n                    <v-list-item>\n                      <v-list-item-avatar>\n                        <v-img\n                          :src=\"require('../../assets/img/shop/1.jpg')\"\n                        ></v-img>\n                      </v-list-item-avatar>\n\n                      <v-list-item-content>\n                        <v-list-item-title>{{ getProduct(item.productId).name }}</v-list-item-title>\n                      </v-list-item-content>\n                    </v-list-item>\n                  </td>\n                  <td>${{ getDiscountedValue(getProduct(item.productId).price, getProduct(item.productId).discount).toFixed(0) }}</td>\n                  <td>{{ item.quantity }}</td>\n                  <td>${{ (getDiscountedValue(getProduct(item.productId).price, getProduct(item.productId).discount) * item.quantity).toFixed(2) }}</td>\n                  <td><a @click=\"removeFromCart(item.productId, index)\">X</a></td>\n                </tr>\n              </tbody>\n            </template>\n          </v-simple-table>\n          <template v-if=\"cart.length == 0\">\n            <p class=\"display-1 font-weight-light pa-1\" style=\"background: transparent\">Your cart is empty!</p>\n          </template>\n        </v-col>\n        <v-col :cols=\"12\" md=\"3\" sm=\"12\" style=\"background-color: lightgray\">\n          <p class=\"headline\">Order Summary</p>\n          <p class=\"overline\">\n            Shipping and additional costs are calculated based on values you\n            have entered.\n          </p>\n          <v-simple-table v-if=\"cart\">\n            <template v-slot:default>\n              <tbody>\n                <tr>\n                  <td>Order Subtotal</td>\n                  <td class=\"text-right\" style=\"width: 50px\">${{getSubTotal().toFixed(2)}}</td>\n                </tr>\n                <tr>\n                  <td>Shipping Charges</td>\n                  <td class=\"text-right\" style=\"width: 50px\">${{cart.length > 0? 10.00: 0.00}}</td>\n                </tr>\n                <tr>\n                  <td>Tax</td>\n                  <td class=\"text-right\" style=\"width: 50px\">${{calculateTax().toFixed(2)}}</td>\n                </tr>\n                <tr>\n                  <td>Total</td>\n                  <td class=\"text-right\" style=\"width: 50px\"><b>${{calculateTotal().toFixed(2)}}</b></td>\n                </tr>\n              </tbody>\n            </template>\n          </v-simple-table>\n          <div class=\"text-center\">\n            <v-btn class=\"white--text mt-5\" outlined\n              @click=\"proceedToBuy()\"\n              >Proceed to Buy</v-btn\n            >\n          </div>\n        </v-col>\n      </v-row>\n    </v-container>\n  </div>\n</template>\n\n<script>\nexport default {\n  data: () => ({\n    products: []\n  }),\n  computed: {\n    cart() {\n      return this.$store.state.session.cart;\n    },\n    // products() {\n    //   return this.$store.state.products;\n    // },\n    purchases() {\n      return this.$store.state.purchases.filter((items) => items.userId == this.$store.state.session.userId);\n    },\n    userId() {\n      return this.$store.state.session.userId;\n    }\n  },\n  methods: {\n    getAllProducts() {\n      this.axios\n        .get(\"http://localhost:5000/api/Product\")\n        .then((response) => {\n          console.log(response);\n          this.products = response.data;\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    },\n    getProduct(id) {\n      return this.products.filter((product) => product.id == id)[0];\n    },\n    getDiscountedValue(price, discount){\n      return price - ( price/100 * discount);\n    },\n    getSubTotal(){\n      var sum = 0;\n      this.cart.forEach(element => {\n        var product = this.getProduct(element.productId);\n        var price = this.getDiscountedValue(product.price, product.discount);\n        sum += price * element.quantity;\n      });\n      return sum\n    },\n    calculateTax(){\n      return this.getSubTotal()/100 * 13;\n    },\n    calculateTotal(){\n      return this.getSubTotal() + this.calculateTax() + (this.cart.length > 0? 10: 0);\n    },\n    proceedToBuy(){\n      // this.cart.forEach((cart) => {\n      //   cart['product'] = this.getProduct(cart.productId)\n      // });\n\n       this.axios\n        .post(\"http://localhost/ecommerce-service/api/order.php?action=createOrder\", {\n          userId: this.$store.state.session.userId,\n          subTotal: this.getSubTotal(),\n          taxAmount: this.calculateTax(),\n          products: this.cart\n        })\n        .then((response) => {\n          console.log(response);\n          this.$store.commit('clearCart');\n          this.$router.push('/confirmation');\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n      //this.$store.commit('addPurchaseItem', purchaseItem);\n\n    },\n    clearCart(){\n      this.$store.commit('clearCart');\n    },\n    removeFromCart(productId, index) {\n      if(this.cart){\n        this.cart.splice(index, 1);\n      }\n      // this.$store.commit('removeFromCart', id);\n    }\n  },\n  created() {\n    this.getAllProducts()\n  }\n}\n</script>\n"]}]}