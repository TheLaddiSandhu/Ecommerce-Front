{"remainingRequest":"C:\\Users\\Lovepreet\\Desktop\\Project\\vuejs-ecommerce\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Lovepreet\\Desktop\\Project\\vuejs-ecommerce\\src\\views\\pages\\profile\\MyPurchases.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Lovepreet\\Desktop\\Project\\vuejs-ecommerce\\src\\views\\pages\\profile\\MyPurchases.vue","mtime":1647363307819},{"path":"C:\\Users\\Lovepreet\\Desktop\\Project\\vuejs-ecommerce\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1647363366624},{"path":"C:\\Users\\Lovepreet\\Desktop\\Project\\vuejs-ecommerce\\node_modules\\babel-loader\\lib\\index.js","mtime":1647363374298},{"path":"C:\\Users\\Lovepreet\\Desktop\\Project\\vuejs-ecommerce\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1647363366624},{"path":"C:\\Users\\Lovepreet\\Desktop\\Project\\vuejs-ecommerce\\node_modules\\vue-loader\\lib\\index.js","mtime":1647363375813}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JqZWN0LWN1cmx5LW5ld2xpbmUNCmltcG9ydCB7IG1kaUtleU91dGxpbmUsIG1kaUxvY2tPcGVuT3V0bGluZSwgbWRpRXllT2ZmT3V0bGluZSwgbWRpRXllT3V0bGluZSB9IGZyb20gJ0BtZGkvanMnDQppbXBvcnQgeyByZWYgfSBmcm9tICdAdnVlL2NvbXBvc2l0aW9uLWFwaScNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBzZXR1cCgpIHsNCiAgICByZXR1cm4gew0KICAgICAgaWNvbnM6IHsNCiAgICAgICAgbWRpS2V5T3V0bGluZSwNCiAgICAgICAgbWRpTG9ja09wZW5PdXRsaW5lLA0KICAgICAgICBtZGlFeWVPZmZPdXRsaW5lLA0KICAgICAgICBtZGlFeWVPdXRsaW5lLA0KICAgICAgfSwNCiAgICB9DQogIH0sDQogIGRhdGE6ICgpID0+ICh7DQogICAgcHVyY2hhc2VzOiBbXSwNCiAgICBwcm9kdWN0czogW10NCiAgfSksDQogIG1ldGhvZHM6IHsNCiAgICBnZXRBbGxQdXJjaGFzZXMoKSB7DQogICAgICB0aGlzLmF4aW9zDQogICAgICAgIC5nZXQoImh0dHA6Ly9sb2NhbGhvc3QvZWNvbW1lcmNlLXNlcnZpY2UvYXBpL29yZGVyLnBocD9hY3Rpb249ZmV0Y2hPcmRlcnNCeVVzZXJJZCZ1c2VySWQ9IisgdGhpcy4kc3RvcmUuc3RhdGUuc2Vzc2lvbi51c2VySWQpDQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4geyANCiAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7DQogICAgICAgICAgdGhpcy5wdXJjaGFzZXMgPSByZXNwb25zZS5kYXRhOyANCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsNCiAgICAgICAgfSk7DQogICAgfSwNCiAgICBnZXRBbGxQcm9kdWN0cygpIHsNCiAgICAgIHRoaXMuYXhpb3MNCiAgICAgICAgLmdldCgiaHR0cDovL2xvY2FsaG9zdC9lY29tbWVyY2Utc2VydmljZS9hcGkvcHJvZHVjdC5waHA/YWN0aW9uPWZldGNoQWxsUHJvZHVjdHMiKQ0KICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsgDQogICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOw0KICAgICAgICAgIHRoaXMucHJvZHVjdHMgPSByZXNwb25zZS5kYXRhOyANCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsNCiAgICAgICAgfSk7DQogICAgfSwNCiAgICBnZXRQcm9kdWN0QnlJZChpZCkgew0KICAgICAgcmV0dXJuIHRoaXMucHJvZHVjdHMuZmlsdGVyKHByb2R1Y3QgPT4gcHJvZHVjdC5pZCA9PSBpZClbMF0NCiAgICB9LA0KICB9LA0KICBjb21wdXRlZDogew0KICAgIC8vIHB1cmNoYXNlcygpIHsNCiAgICAvLyAgIGNvbnNvbGUubG9nKHRoaXMuJHN0b3JlLnN0YXRlLnB1cmNoYXNlcykNCiAgICAvLyAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5wdXJjaGFzZXMuZmlsdGVyKGl0ZW1zID0+IGl0ZW1zLnVzZXJJZCA9PSB0aGlzLiRzdG9yZS5zdGF0ZS5zZXNzaW9uLnVzZXJJZCkNCiAgICAvLyB9LA0KICAgIC8vIHByb2R1Y3RzKCkgew0KICAgIC8vICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnByb2R1Y3RzDQogICAgLy8gfSwNCiAgICANCiAgfSwNCiAgY3JlYXRlZCgpew0KICAgIHRoaXMuZ2V0QWxsUHJvZHVjdHMoKTsNCiAgICB0aGlzLmdldEFsbFB1cmNoYXNlcygpOw0KICB9DQp9DQo="},{"version":3,"sources":["MyPurchases.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"MyPurchases.vue","sourceRoot":"src/views/pages/profile","sourcesContent":["<template>\r\n  <v-card flat class=\"mt-5\">\r\n    <v-form>\r\n      <div>\r\n        <v-row v-if=\"purchases.length > 0\">\r\n          <v-col md=\"6\" lg=\"8\" cols=\"12\" :key=\"purchase.id\" v-for=\"purchase in purchases\">\r\n            <v-card class=\"overflow-hidden\" style=\"margin: 10px\">\r\n              <v-row class=\"ma-0 h-full\">\r\n                <v-col cols=\"12\" sm=\"8\" md=\"12\" lg=\"8\" order=\"2\" order-lg=\"1\">\r\n                  <v-card-title>Purchase # {{ purchase.id }}</v-card-title>\r\n                  <v-card-text :key=\"purchase.id + item.id\" v-for=\"(item, index) in purchase.products\">\r\n                    {{ index + 1 }}. Product: <b>{{ getProductById(item.productId).name }}</b\r\n                    >, Quantity: <b>{{ item.quantity }}</b>\r\n                  </v-card-text>\r\n                </v-col>\r\n                <v-col\r\n                  cols=\"12\"\r\n                  sm=\"4\"\r\n                  md=\"12\"\r\n                  lg=\"4\"\r\n                  order=\"1\"\r\n                  order-lg=\"2\"\r\n                  class=\"memberpricing-bg\"\r\n                  style=\"background-color: rgba(94, 86, 105, 0.04)\"\r\n                >\r\n                  <div class=\"membership-pricing\">\r\n                    <p class=\"mt-16 text--primary\">\r\n                      <sub class=\"text-2xl\">$</sub>\r\n                      <sup style=\"font-size: 3rem; top: 9px\" class=\"font-weight-semibold\">{{ purchase.subTotal + purchase.taxAmount + 10 }}</sup>\r\n                      <sub class=\"text-xl\">CAD</sub>\r\n                    </p>\r\n                  </div>\r\n                </v-col>\r\n              </v-row>\r\n            </v-card>\r\n          </v-col>\r\n        </v-row>\r\n      </div>\r\n      <p class=\"font-weight-light pa-1\" v-if=\"purchases.length == 0\">You have no purchases!</p>\r\n    </v-form>\r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\n// eslint-disable-next-line object-curly-newline\r\nimport { mdiKeyOutline, mdiLockOpenOutline, mdiEyeOffOutline, mdiEyeOutline } from '@mdi/js'\r\nimport { ref } from '@vue/composition-api'\r\n\r\nexport default {\r\n  setup() {\r\n    return {\r\n      icons: {\r\n        mdiKeyOutline,\r\n        mdiLockOpenOutline,\r\n        mdiEyeOffOutline,\r\n        mdiEyeOutline,\r\n      },\r\n    }\r\n  },\r\n  data: () => ({\r\n    purchases: [],\r\n    products: []\r\n  }),\r\n  methods: {\r\n    getAllPurchases() {\r\n      this.axios\r\n        .get(\"http://localhost/ecommerce-service/api/order.php?action=fetchOrdersByUserId&userId=\"+ this.$store.state.session.userId)\r\n        .then((response) => { \r\n          console.log(response);\r\n          this.purchases = response.data; \r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        });\r\n    },\r\n    getAllProducts() {\r\n      this.axios\r\n        .get(\"http://localhost/ecommerce-service/api/product.php?action=fetchAllProducts\")\r\n        .then((response) => { \r\n          console.log(response);\r\n          this.products = response.data; \r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        });\r\n    },\r\n    getProductById(id) {\r\n      return this.products.filter(product => product.id == id)[0]\r\n    },\r\n  },\r\n  computed: {\r\n    // purchases() {\r\n    //   console.log(this.$store.state.purchases)\r\n    //   return this.$store.state.purchases.filter(items => items.userId == this.$store.state.session.userId)\r\n    // },\r\n    // products() {\r\n    //   return this.$store.state.products\r\n    // },\r\n    \r\n  },\r\n  created(){\r\n    this.getAllProducts();\r\n    this.getAllPurchases();\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.two-factor-auth {\r\n  max-width: 25rem;\r\n}\r\n.security-character {\r\n  position: absolute;\r\n  bottom: -0.5rem;\r\n}\r\n</style>\r\n"]}]}