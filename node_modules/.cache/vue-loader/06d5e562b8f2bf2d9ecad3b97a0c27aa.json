{"remainingRequest":"C:\\Users\\Lovepreet\\Desktop\\Project\\vuejs-ecommerce\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Lovepreet\\Desktop\\Project\\vuejs-ecommerce\\src\\views\\pages\\ProductDetails.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Lovepreet\\Desktop\\Project\\vuejs-ecommerce\\src\\views\\pages\\ProductDetails.vue","mtime":1647407025942},{"path":"C:\\Users\\Lovepreet\\Desktop\\Project\\vuejs-ecommerce\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1647363366624},{"path":"C:\\Users\\Lovepreet\\Desktop\\Project\\vuejs-ecommerce\\node_modules\\babel-loader\\lib\\index.js","mtime":1647363374298},{"path":"C:\\Users\\Lovepreet\\Desktop\\Project\\vuejs-ecommerce\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1647363366624},{"path":"C:\\Users\\Lovepreet\\Desktop\\Project\\vuejs-ecommerce\\node_modules\\vue-loader\\lib\\index.js","mtime":1647363375813}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiAoKSA9PiAoewogICAgcmF0aW5nOiA0LjUsCiAgICBpdGVtOiA1LAogICAgcHJvZHVjdDogW10sCiAgfSksCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuaWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQKICAgIHRoaXMuZ2V0UHJvZHVjdERldGFpbCh0aGlzLmlkKQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC8vIHByb2R1Y3QoKSB7CiAgICAvLyAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5wcm9kdWN0c1t0aGlzLmlkIC0xXQogICAgLy8gfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldFByb2R1Y3REZXRhaWwoaWQpIHsKICAgICAgdGhpcy5heGlvcwogICAgICAgIC5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9BcGkvUHJvZHVjdC8nLCAraWQpCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSkKICAgICAgICAgIHRoaXMucHJvZHVjdCA9IHJlc3BvbnNlLmRhdGEKICAgICAgICB9KQogICAgICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikKICAgICAgICB9KQogICAgICB0aGlzLnByb2R1Y3QgPSB0aGlzLiRzdG9yZS5zdGF0ZS5wcm9kdWN0c1t0aGlzLmlkIC0gMV0KICAgIH0sCiAgICBnZXREaXNjb3VudGVkVmFsdWUocHJpY2UsIGRpc2NvdW50KSB7CiAgICAgIHJldHVybiBwcmljZSAtIChwcmljZSAvIDEwMCkgKiBkaXNjb3VudAogICAgfSwKICAgIGdldFJldmlld3NDb3VudChwcm9kdWN0KSB7CiAgICAgIHJldHVybiBwcm9kdWN0LnJldmlld3MubGVuZ3RoCiAgICB9LAogICAgYWRkVG9DYXJ0KHByb2R1Y3RJZCwgcXVhbnRpdHkpIHsKICAgICAgdmFyIGl0ZW0gPSB7CiAgICAgICAgcHJvZHVjdElkOiBwcm9kdWN0SWQsCiAgICAgICAgcXVhbnRpdHk6IHF1YW50aXR5LAogICAgICB9CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnYWRkVG9DYXJ0JywgaXRlbSkKICAgIH0sCiAgICBhZGRSZXZpZXcoaWQsIHJhdGluZywgcmV2aWV3KSB7CiAgICAgIC8vIGxldCBuZXdSZXZpZXcgPSB7CiAgICAgIC8vICAgaWQ6IGlkLAogICAgICAvLyAgIHJhdGluZzogcmF0aW5nLAogICAgICAvLyAgIHJldmlldzogcmV2aWV3LAogICAgICAvLyAgIHBlcnNvbk5hbWU6IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJzLmZpbHRlcigodXNlcikgPT4gdXNlci5pZCA9IHRoaXMuJHN0b3JlLnN0YXRlLnNlc3Npb24udXNlcklkKVswXS5uYW1lLAogICAgICAvLyAgIHJldmlld0Rlc2NyaXB0aW9uOiByZXZpZXcKICAgICAgLy8gfTsKCiAgICAgIHRoaXMuYXhpb3MKICAgICAgICAucG9zdCgnaHR0cDovL2xvY2FsaG9zdC9lY29tbWVyY2Utc2VydmljZS9hcGkvcmV2aWV3LnBocD9hY3Rpb249aW5zZXJ0UmV2aWV3JywgewogICAgICAgICAgcmF0aW5nOiByYXRpbmcsCiAgICAgICAgICBjb21tZW50OiByZXZpZXcsCiAgICAgICAgICB1c2VySWQ6IHRoaXMuJHN0b3JlLnN0YXRlLnNlc3Npb24udXNlcklkLAogICAgICAgICAgcHJvZHVjdElkOiBpZCwKICAgICAgICB9KQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKQogICAgICAgICAgdGhpcy5nZXRQcm9kdWN0RGV0YWlsKGlkKQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQogICAgICAgIH0pCiAgICAgIC8vIHRoaXMucHJvZHVjdC5yZXZpZXdzLnB1c2gobmV3UmV2aWV3KTsKICAgICAgLy8gdGhpcy4kc3RvcmUuY29tbWl0KCdhZGRSZXZpZXcnLCBuZXdSZXZpZXcpOwogICAgICB0aGlzLmNsZWFyRmllbGRzKCkKICAgIH0sCiAgICBjbGVhckZpZWxkcygpIHsKICAgICAgdGhpcy5uZXdSYXRpbmcgPSAwCiAgICAgIHRoaXMucmV2aWV3ID0gJycKICAgIH0sCiAgICBoYXZlUHVyY2hhc2VkUHJvZHVjdChpZCkgewogICAgICBsZXQgY3VyclVzZXJJZCA9IHRoaXMuJHN0b3JlLnN0YXRlLnNlc3Npb24udXNlcklkCiAgICAgIHZhciBmbGFnID0gdHJ1ZQoKICAgICAgdGhpcy4kc3RvcmUuc3RhdGUucHVyY2hhc2VzLmZvckVhY2goZWxlbWVudCA9PiB7CiAgICAgICAgaWYgKChlbGVtZW50LnVzZXJJZCA9IGN1cnJVc2VySWQpKSB7CiAgICAgICAgICBpZiAoZWxlbWVudC5pdGVtcy5maWx0ZXIoaXRlbSA9PiBpdGVtLnByb2R1Y3RJZCA9PSBpZCkubGVuZ3RoID4gMCkgewogICAgICAgICAgICBmbGFnID0gdHJ1ZQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSkKICAgICAgcmV0dXJuIGZsYWcKICAgIH0sCiAgfSwKfQo="},{"version":3,"sources":["ProductDetails.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ProductDetails.vue","sourceRoot":"src/views/pages","sourcesContent":["<template>\n  <div>\n    <v-container>\n      <div class=\"row\">\n        <div class=\"col-md-5 col-sm-5 col-xs-12\">\n          <v-carousel>\n            <v-carousel-item :src=\"require('../../assets/img/shop/' + product.image)\"></v-carousel-item>\n          </v-carousel>\n        </div>\n        <div class=\"col-md-7 col-sm-7 col-xs-12\">\n          <div class=\"pl-6\">\n            <p class=\"display-1 mb-0\">{{ product.name }}</p>\n            <v-card-actions class=\"pa-0\">\n              <p class=\"headline font-weight-light pt-3\">\n                ${{ getDiscountedValue(product.price, product.discount) }}\n                <del style=\"\" class=\"subtitle-1 font-weight-thin\">${{ product.price }}</del>\n              </p>\n              <v-spacer></v-spacer>\n              <v-rating\n                v-model=\"product.rating\"\n                class=\"\"\n                background-color=\"warning lighten-3\"\n                color=\"warning\"\n                dense\n                readonly\n              ></v-rating>\n              <span class=\"body-2 font-weight-thin\">{{ getReviewsCount(product) }} REVIEWS</span>\n            </v-card-actions>\n            <p class=\"subtitle-1 font-weight-thin\">\n              {{ product.description }}\n            </p>\n            <p class=\"title\">SIZE</p>\n            <v-radio-group v-model=\"row\" row>\n              <v-radio label=\"Mini\" value=\"XS\"></v-radio>\n              <v-radio label=\"Standard\" value=\"s\"></v-radio>\n              <v-radio label=\"Pro\" value=\"m\"></v-radio>\n              <v-radio label=\"Pro Max\" value=\"l\"></v-radio>\n            </v-radio-group>\n            <p class=\"title\">STORAGE</p>\n            <v-radio-group v-model=\"row\" row>\n              <v-radio label=\"64\" value=\"XS\"></v-radio>\n              <v-radio label=\"128\" value=\"s\"></v-radio>\n              <v-radio label=\"256\" value=\"m\"></v-radio>\n            </v-radio-group>\n            <p class=\"title\">ITEMS</p>\n\n            <v-text-field outlined style=\"width: 100px\" :value=\"1\" v-model=\"quantity\" dense></v-text-field>\n            <v-btn class=\"white--text\" outlined tile dense @click=\"addToCart(product.id, quantity)\"\n              ><v-icon>mdi-cart</v-icon> ADD TO CART</v-btn\n            >\n          </div>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col-sm-12 col-xs-12 col-md-12\">\n          <v-tabs>\n            <v-tab>Description</v-tab>\n            <v-tab>Reviews</v-tab>\n            <v-tab-item>\n              <p class=\"pt-10 subtitle-1 font-weight-thin\">\n                {{ product.longDescription }}\n              </p>\n            </v-tab-item>\n            <v-tab-item>\n              <v-list three-line=\"true\" avatar=\"true\">\n                <v-list-item-group v-model=\"item\" color=\"primary\">\n                  <v-list-item v-for=\"(item, i) in product.reviews\" :key=\"i\" inactive=\"true\">\n                    <v-list-item-content>\n                      <v-list-item-title v-html=\"item.user.name\"></v-list-item-title\n                      ><v-rating\n                        v-model=\"item.rating\"\n                        class=\"\"\n                        background-color=\"warning lighten-3\"\n                        color=\"warning\"\n                        dense\n                        readonly\n                      ></v-rating>\n                      <v-list-item-subtitle v-html=\"item.comment\"></v-list-item-subtitle>\n                    </v-list-item-content>\n                  </v-list-item>\n\n                  <v-list-item v-if=\"havePurchasedProduct(id)\">\n                    <v-list-item-content>\n                      <v-text-field\n                        outlined\n                        style=\"width: 100px\"\n                        :value=\"1\"\n                        v-model=\"review\"\n                        placeholder=\"Post a review\"\n                        dense\n                      ></v-text-field>\n                      <v-rating\n                        v-model=\"newRating\"\n                        class=\"\"\n                        background-color=\"warning lighten-3\"\n                        color=\"warning\"\n                        value=\"0\"\n                        dense\n                      ></v-rating>\n                      <v-btn class=\"white--text\" outlined tile dense @click=\"addReview(id, newRating, review)\"\n                        ><v-icon>mdi-cart</v-icon>Post review</v-btn\n                      >\n                    </v-list-item-content>\n                  </v-list-item>\n                </v-list-item-group>\n              </v-list>\n            </v-tab-item>\n          </v-tabs>\n        </div>\n      </div>\n    </v-container>\n  </div>\n</template>\n<script>\nexport default {\n  data: () => ({\n    rating: 4.5,\n    item: 5,\n    product: [],\n  }),\n  created() {\n    this.id = this.$route.params.id\n    this.getProductDetail(this.id)\n  },\n  computed: {\n    // product() {\n    //   return this.$store.state.products[this.id -1]\n    // },\n  },\n  methods: {\n    getProductDetail(id) {\n      this.axios\n        .get('http://localhost:5000/Api/Product/', +id)\n        .then(response => {\n          console.log(response.data)\n          this.product = response.data\n        })\n        .catch(error => {\n          console.log(error)\n        })\n      this.product = this.$store.state.products[this.id - 1]\n    },\n    getDiscountedValue(price, discount) {\n      return price - (price / 100) * discount\n    },\n    getReviewsCount(product) {\n      return product.reviews.length\n    },\n    addToCart(productId, quantity) {\n      var item = {\n        productId: productId,\n        quantity: quantity,\n      }\n      this.$store.commit('addToCart', item)\n    },\n    addReview(id, rating, review) {\n      // let newReview = {\n      //   id: id,\n      //   rating: rating,\n      //   review: review,\n      //   personName: this.$store.state.users.filter((user) => user.id = this.$store.state.session.userId)[0].name,\n      //   reviewDescription: review\n      // };\n\n      this.axios\n        .post('http://localhost/ecommerce-service/api/review.php?action=insertReview', {\n          rating: rating,\n          comment: review,\n          userId: this.$store.state.session.userId,\n          productId: id,\n        })\n        .then(response => {\n          console.log(response)\n          this.getProductDetail(id)\n        })\n        .catch(error => {\n          console.log(error)\n        })\n      // this.product.reviews.push(newReview);\n      // this.$store.commit('addReview', newReview);\n      this.clearFields()\n    },\n    clearFields() {\n      this.newRating = 0\n      this.review = ''\n    },\n    havePurchasedProduct(id) {\n      let currUserId = this.$store.state.session.userId\n      var flag = true\n\n      this.$store.state.purchases.forEach(element => {\n        if ((element.userId = currUserId)) {\n          if (element.items.filter(item => item.productId == id).length > 0) {\n            flag = true\n          }\n        }\n      })\n      return flag\n    },\n  },\n}\n</script>\n"]}]}